<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>노트 상세</title>
</head>
<body>
    <h1>📝 {{ note.title }}</h1>

    {% if messages %}
        <ul>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <section>
        <h2>원문 내용</h2>
        {% if note.pdf_file %}
            <p>첨부 PDF: <a href="{{ note.pdf_file.url }}" target="_blank">다운로드</a></p>
        {% endif %}
        <pre style="white-space: pre-wrap; background: #f7f7f7; padding: 12px;">{{ note.content }}</pre>
    </section>

    <section>
        <h2>AI 요약</h2>
        {% if summary %}
            <pre style="white-space: pre-wrap; background: #f0f9ff; padding: 12px;">{{ summary.content }}</pre>
        {% else %}
            <p>아직 요약이 없습니다.</p>
        {% endif %}
        <form method="post" action="{% url 'summarize_note' note.id %}">
            {% csrf_token %}
            <button type="submit">AI로 요약 생성</button>
        </form>
    </section>

    <section>
        <h2>OX 퀴즈</h2>
        {% if quizzes %}
            <ol>
                {% for q in quizzes %}
                    <li>
                        <p><strong>문제:</strong> {{ q.question }}</p>
                        <p><strong>정답:</strong> {{ q.answer|yesno:"O,X" }}</p>
                        {% if q.explanation %}
                            <p><strong>해설:</strong> {{ q.explanation }}</p>
                        {% endif %}
                    </li>
                {% endfor %}
            </ol>
        {% else %}
            <p>아직 퀴즈가 없습니다.</p>
        {% endif %}
        <form method="post" action="{% url 'generate_quiz' note.id %}">
            {% csrf_token %}
            <button type="submit">OX 퀴즈 생성</button>
        </form>
    </section>

    <p><a href="{% url 'note_list' %}">← 목록으로</a></p>
</body>
</html>
